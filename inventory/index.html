<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="A list of ready to ship traditional papercrafts and ink-based artwork, handmade paper, journals, and more! Tax included in all prices.">
		<meta name="author" content="Reverie Wisp">

		<!-- Font awesome paintbrush used for a favicon! No changes were made. https://fontawesome.com/license -->
		<link rel="icon" href="/assets/brush.ico" type="image/gif">

		<title>Inventory - Dragon Ink</title>

		<!-- Open graph preview tools -->
		<meta property="og:site_name" content="Dragon Ink">
		<meta property="og:title" content="Dragon Ink: Ready to Ship Inventory">
		<meta property="og:description" content="A list of ready to ship premade journals, handmade paper, and artwork, plus commission form!">
		<meta property="og:image" content="https://drgn.ink/assets/logo.png">
		<meta property="og:url" content="https://drgn.ink/inventory">
		<meta property="og:type" content="product">
		
		<meta name="twitter:site" content="@loam_net">
		<meta name="twitter:card" content="A list of ready to ship handmade paper, journals and artwork, plus commission form!">

		<!-- Style sheets -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=IM+Fell+English+SC|Lato" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Pangolin&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="/assets/style.css">

		<!-- Scripts -->
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

		<!-- Data -->
		<script language="JavaScript" src="/globals.json"></script>
		<script language="JavaScript" src="inventory.json"></script>
	</head>

	<body style="margin-left: auto; margin-right: auto;">
		<div class="ink-body">
			<div class="ink-main container">

				<!-- Header -->
				<div class="row justify-content-center">
					<div class="col-xs">
						<a style="text-decoration: none;" href="/"><img id="ink-logo" class="ink-noselect" src="/assets/logo.png" alt="ink splotch logo"></a>
					</div>
					<div class="col-xs ink-center">
						<div class="ink-center ink-text-title">
							<h1>Dragon Ink</h1>
							<h2 class="ink-text-subtitle">Doodles &amp; more!</h2>
							<span class="ink-text-link">
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="/"><i class="fas fa-home"></i></a>&nbsp;]&nbsp;
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://twitter.com/loam_net"><i class="fab fa-twitter"></i></a>&nbsp;]&nbsp;
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.loam.net/about/"><i class="fas fa-info"></i></i></a>&nbsp;]&nbsp;
							</span>
						</div>
					</div>
				</div>

				<!-- Section title -->
				<div class="ink-hr">
					<hr/>
					<h2 class="ink-text-title">Inventory &amp; Commissions</h2>
					<p style="max-width: 320px; margin-left: auto; margin-right: auto; text-align: left;">
						If you're interested in getting something custom, go ahead and let me know what you're after! If you like the look of something in the list below, let me know which it is! In either case, I'll get back to you as soon as possible.
						<form style="max-width: 320px; margin-left: auto; margin-right: auto; text-align: left;"
						  action="https://formspree.io/xnqdbzjk"
						  method="POST"
						>
						  <label>
						    <strong>Email</strong><br/>
						    <span style="font-size: .8em;"><em>I need it to be able to contact you!</em></span>
						    <input style="width: 100%;" type="email" name="contact" required>
						  </label>
						  <br/>
						  <label>
						    <strong>Commission request or item(s) of interest:</strong><br/>
						    <textarea style="width: 100%; min-height: " name="message"></textarea>
						  </label>
						<br/>
						  <!-- your other form fields go here -->

						  <button class="btn btn-outline-dark" type="submit">Submit</button>
						</form>
					</p>
				</div>
				<hr style="max-width: 320px;"/>

				<!-- Inventory dynamic table -->
				<div>
					<br/>
					<span id="ink-inventory"><p style="margin-left: auto; margin-right: auto; max-width: 240px;"><em>Goodness, looks like I'm all out of premade items! Check back soon!</em></p></span>
					<p class="text-left ink-footer-text" id="footnote" style="max-width: 300px;">* All total prices include tax! Note that destinations outside of the US may incur additional shipping cost depending on location.</p>
					<br/>
				</div>

				<!-- Footer -->
				<div class="ink-hr">
					<hr/>
					<span class="ink-text-link">
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="/"><i class="fas fa-home"></i></a>&nbsp;]&nbsp;
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://twitter.com/loam_net"><i class="fab fa-twitter"></i></a>&nbsp;]&nbsp;
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.loam.net/about/"><i class="fas fa-info"></i></i></a>&nbsp;]&nbsp;
					</span>
					<p class="text-left ink-footer-text">Due to the nature of papermaking, sizing is approximate, tho tends to run a tad bigger than specified. Drgn.ink comissions and distribution are handled by <a href="https://loam.net">Loam LLC</a>. Content copyright &copy; 2019-2020 <a href="https://loam.net">Loam LLC</a> - all rights reserved.  Trademarks belong to their respective owners.</p>
				</div>

				<!-- Modal contents for selecting a displayable image -->
				<div id="modal" class="ink-modal">
					<span id="modal-close">&times;</span>
					<img class="modal-content" id="ink-modal-image">
					<div id="modal-caption"></div>
				</div>
			</div>
		</div>

		<!-- Script required to load before page finish-->
		<script type="text/javascript">

			document.getElementById('ink-logo').draggable = false;

			function rowsAsTable(text) {
				return `<table class="ink-table">\n${text}</table>\n`;
			}

			function th(text) {
				return `<th class="ink-table-th">${text}</th>\n`;
			}	

			function td(text) {
				return `<td class="ink-table-td">${text}</td>\n`;
			}

			// Create the header for the inventory table
			function createHeader() {
				let accumulated = "";

				accumulated += "<tr>\n";
				accumulated += th("Item");
				accumulated += th("About");
				accumulated += th('Price<a href="#footnote">*</a>');
				accumulated += "</tr>\n";

				return accumulated;
			}

			// Using a single object inside of the json array, create a row for the inventory table
			function createItem(obj) {
				let accumulated = "";
				let padding = "padding: 5px;";
				let decimals = 2;
				let smallFont = "font-size: 0.7em;";

				accumulated += "<tr>\n";
				accumulated += td(`<img src="${obj.src}" alt="${obj.alt}" onclick="onImageClick('${obj.src}', '${obj.alt}');">\n`);
				accumulated += td(`<div class="text-left" style="${padding}">\n<h2 class="ink-text-subtitle"><strong>${obj.name}</strong></h2>\n<p><a href="javascript:void(0);" onclick="onImageClick('${obj.src}', '${obj.alt}');"><i class="fas fa-expand"></i> Details</a></p>\n<div>\n`);
				accumulated += td(`
					<div style="${padding}">
					<p style="margin-bottom: 0px;">$${(obj.price + (obj.freeShipping ? 0 : globals.costShipping)).toFixed(2)}</p>
					<hr style="margin: 10px;"/>
					<p style="${smallFont}"><strong>Item:</strong><br/>$${obj.price.toFixed(decimals)}<br/><strong>Shipping:</strong><br/>${obj.freeShipping ? "free!" : "$" + globals.costShipping.toFixed(decimals)}</p>
					</div>
					`);
				accumulated += "</tr>\n";

				return accumulated;
			}

			// Parse inventory
			if(inventory.length > 0) {
				let target = document.getElementById("ink-inventory");
				let accumulated = "";

				accumulated += createHeader();

				for(let i = 0; i < inventory.length; ++i) {
					accumulated += createItem(inventory[i]);
				}

				accumulated = rowsAsTable(accumulated);
				target.innerHTML = accumulated;
			}

			// Set up modal interactions
			let modal = document.getElementById("modal");
			let modalImg = document.getElementById("ink-modal-image");
			let modalCaption = document.getElementById("modal-caption");
			let closeSection = document.getElementById("modal-close");
			let closeBG = document.getElementById("modal");

			// Remove the query string in the browser window
			// From http://atodorov.org/blog/2013/01/28/remove-query-string-with-javascript-and-html5/
			function cleanQueryState() {
				let uri = window.location.toString();
				if (uri.indexOf("?") > 0) {
				    let clean_uri = uri.substring(0, uri.indexOf("?"));
				    window.history.replaceState({}, document.title, clean_uri);
				}
			}


			// Modal function binding
			closeBG.onclick = function() { modal.style.display = "none"; cleanQueryState(); }
			closeSection.onclick = function() { modal.style.display = "none"; cleanQueryState(); }



			// Click callback function for the image
			function onImageClick(src, alt) {
				modal.style.display = "block";
				modalImg.src = src;
				modalCaption.innerHTML = alt;
			}
		</script>
		</body>
	</body>
</html>