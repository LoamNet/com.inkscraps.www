<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Traditional papercrafts and ink-based artwork, gallery and comission site! Comissions feature handmade paper, journals, pictures, and more!">
		<meta name="author" content="Reverie Wisp">

		<!-- Font awesome paintbrush used for a favicon! No changes were made. https://fontawesome.com/license -->
		<link rel="icon" href="assets/brush.ico" type="image/gif">

		<title>Dragon Ink</title>
		
		<!-- Open graph preview tools -->
		<meta property="og:site_name" content="Dragon Ink">
		<meta property="og:title" content="Dragon Ink: Handmade Paper and Art">
		<meta property="og:description" content="Handmade paper, journals, and ink-based artwork available to purchase or commission!">
		<meta property="og:image" content="https://derg.ink/assets/logo.png">
		<meta property="og:url" content="https://derg.ink/">
		<meta property="og:type" content="product">
		
		<meta name="twitter:site" content="@LoamApp">
		<meta name="twitter:card" content="Handmade paper, journals and artwork!">

		<!-- Style sheets -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=IM+Fell+English+SC|Lato" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Pangolin&display=swap" rel="stylesheet">
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
	</head>

	<style>
		html, body {
			background-image: url('assets/paper.jpg');
			height: 100%;
			width: 100%;
			margin: 0px;
		}


		/* ---------- Start Modal config ---------- */

		.ink-panel {
			display: inline-block;

			border-radius: 5px;

			max-width: 210px;
			background-color: rgba(100, 70, 70, .075);
			margin: 5px;

			border-top: 2px solid white;
			border-bottom: 2px solid white;
		}

		.ink-modal {
			display: none;
			overflow: auto;
			padding-top: 100px;
			z-index: 1;

			position: fixed;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;

			transition: 10s;

			background-color: rgb(0, 0, 0);
			background-color: rgba(0, 0, 0, 0.85);
		}

		.modal-content {
		  margin: auto;
		  display: block;
		  width: 80%;
		  max-width: 700px;
		}

		#modal-caption {
		  margin: auto;
		  display: block;
		  width: 80%;
		  max-width: 700px;
		  text-align: center;
		  color: #ccc;
		  padding: 10px 0;
		  height: 150px;
		  font-family: 'Pangolin', sans-serif;
		}

		.modal-content, #modal-caption { 
		  animation-name: zoom;
		  animation-duration: 0.2s;
		}

		@keyframes zoom {
		  from {transform:scale(0)} 
		  to {transform:scale(1)}
		}

		#modal-close {
		  position: absolute;
		  top: 15px;
		  right: 35px;
		  color: #f1f1f1;
		  font-size: 40px;
		  font-weight: bold;
		  transition: 0.2s;
		}

		#modal-close:hover,
		#modal-close:focus {
		  color: #bbb;
		  text-decoration: none;
		  cursor: pointer;
		}

		@media only screen and (max-width: 700px){
		  .modal-content {
		    width: 100%;
		  }
		}


		/* ---------- End Modal config ---------- */

		.ink-caption {
			line-height: 1.25em;
			text-align: left;

			padding-top: 10px;
			padding-left: 5px;
			padding-right: 5px;
		}

		.ink-body {
			text-align: center;
			height: 100%;
			width: 100%;
		}

		#ink-logo {
			max-width: 130px;

			margin: 10px;
		}

		.ink-text-link {
			font-size: 16px;
			opacity: 0.6;
			font-family: 'Lato', sans-serif;
		}

		.ink-center {
			display: flex;
			align-items: center;
			justify-content: center;
			vertical-align: middle;

			margin-left: 10px;
			margin-right: 10px;
		}

		.ink-text-title {
			padding-top: 20px;
			font-family: 'IM Fell English SC', serif;
			color: rgb(40, 40, 40);
			display: inline-block;
		}

		.ink-text-title h1 {
			margin: 0px;
			font-size: 25px;
		}

		.ink-text-subtitle {
			font-family: 'IM Fell English SC', serif;
			color: rgb(40, 40, 40);
			font-size: 17px;
			margin-bottom: 0px;
		}

		.ink-main {
			position:relative;
		}

		.ink-break {
			margin-left: auto;
			margin-right: auto;
			max-width: 600px;
		}

		.ink-noselect {
			/* from https://stackoverflow.com/a/4407335 */
			-webkit-touch-callout: none; /* iOS Safari */
			-webkit-user-select: none; /* Safari */
			 -khtml-user-select: none; /* Konqueror HTML */
				 -moz-user-select: none; /* Firefox */
				-ms-user-select: none; /* Internet Explorer/Edge */
					user-select: none; /* Non-prefixed version, currently
											supported by Chrome and Opera */
		}

		.ink-hr {
			margin-top: -5px;
			margin-bottom: 20px;
			text-align: center;
		}

		.ink-footer-text {
			opacity: 0.5;
			font-family: 'Lato', sans-serif;
			font-size: .8em;
			margin: 20px;
			margin-left: auto;
			margin-right: auto;
			max-width: 500px;
			text-align: center;
		}

		.ink-item-img {
			max-width: 200px;
			border: 2px solid white;
			border-radius: 200px;
			margin-bottom: 1em;
			margin-top: 2em;
		}

		hr {
			opacity: .75;
		}

		/* ---------- Image Display Grid ---------- */

		.flexgrid-row {
			display: -ms-flexbox;
			display: flex;

			-ms-flex-wrap: wrap;
			flex-wrap: wrap;

			padding: 0 4px;
			max-width: 930px;
			margin-left: auto;
			margin-right: auto;
		}

		/* 4 col */
		.flexgrid-column {
			-ms-flex: 25%;
			flex: 25%;

			max-width: 25%;
			padding: 0 4px;
		}

		.flexgrid-column img {
			margin-top: 8px;
			vertical-align: middle;
		}

		/* Stack double */
		@media screen and (max-width: 800px) {
			.flexgrid-column {
				-ms-flex: 50%;
				flex: 50%;
				max-width: 50%;
			}
		}

		/* Stack single */
		@media screen and (max-width: 600px) {
			.flexgrid-column {
				-ms-flex: 100%;
				flex: 100%;
				max-width: 100%;
			}
		}


		/* ---------- Specific Tiled Image ---------- */


		.ink-displayable {
			cursor: pointer;
			transition: 0.2s;
			width:100%;

			border-top-left-radius: 5px;
			border-top-right-radius: 5px;

			margin-top: 0px !important;
		}

		.ink-displayable:hover {
			filter: brightness(120%);
		}

	</style>

	<body>
		<div class="ink-body">
			<div class="ink-main container">
				<div class="row justify-content-center">
					<div class="col-xs">
						<img id="ink-logo" class="ink-noselect" src="assets/logo.png" alt="ink splotch logo">
					</div>
					<div class="col-xs ink-center">
						<div class="ink-center ink-text-title">
							<h1>Dragon Ink</h1>
							<h2 class="ink-text-subtitle">Doodles &amp; more!</h2>
							<span class="ink-text-link">
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.reveriewisp.com/"><i class="fas fa-home"></i></a>&nbsp;]&nbsp;
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://twitter.com/ReverieWisp"><i class="fab fa-twitter"></i></a>&nbsp;]&nbsp;
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.deviantart.com/reveriewisp"><i class="fab fa-deviantart"></i></i></a>&nbsp;]&nbsp;
							</span>
						</div>
					</div>
				</div>

				<div class="ink-hr">
					<hr/>
					<h2 class="ink-text-title">Premade &amp; Custom Items</h2>
				</div>
				<div class="row text-center">
					<div class="col-md">
						<img class="ink-item-img" src="assets/example-paper.jpg" alt="A fanned out stack of raspberry colored paper">
						<div class="text-left">
							<p>Want to buy paper by the sheet? 4x6 sheets start at $0.75, and 8x10 sheets start at $1.50! To see what's available, inquire through the contact & comission form!</p>
							<!--p>Want to buy paper by the sheet? 4x6 sheets start at $0.75, and 8x10 sheets start at $1.50! Check out the inventory page for a complete list of everything available!</p-->
							<p>Looking for scrap paper? It starts at $0.30 a sheet with a 10-sheet minimum order. This paper is anything that doesn't meet thickness, uniformity, or sizing standards, or is more experimental in nature.</p>
						</div>
					</div>
					<div class="col-md">
						<img class="ink-item-img" src="assets/example-art.jpg" alt="A fanned out stack of raspberry colored paper">
						<div class="text-left">
							<p>Looking for something a little more artsy? Custom quick tree doodles start at $5 for a sketch on 4x6 paper. Check out the gallery for examples, and the inventory page to see what's available.</p>
							<p>Custom pieces can be made to order, and pricing will varry based on the size and complexity!</p>
						</div>
					</div>
					<div class="col-md">
						<img class="ink-item-img" src="assets/example-journal.jpg" alt="A fanned out stack of raspberry colored paper">
						<div class="text-left">
							<p>Looking for a custom bound journal? Pricing starts at $10, and by default journals come with 10 inner pages, front and back cover, and have a thread and glue binding. Each additional page past the first is $1, up to 40 pages!</p>
						</div>
					</div>
				</div>
				<br/>
				<a class="btn btn-outline-dark" href="contact/"><!--Inventory-->Contact &amp; Commission Form</a>
				<br/>
				<br/>
				<p style="max-width: 400px; margin-left: auto; margin-right: auto;">Shipping is $5 flat rate for all orders. Tax is included in all pricing. All paper is made from recycled materials.</p>
				<br/>

				<!-- Displayable images -->
				<div class="ink-hr">
					<hr/>
					<h2 class="ink-text-title">Gallery</h2>
				</div>
				<div>
					<div class="flexgrid-row"> 
						<div class="flexgrid-column">
							<span id="displayed-0"></span>
						</div>
						<div class="flexgrid-column">
							<span id="displayed-1"></span>
						</div>  
						<div class="flexgrid-column">
							<span id="displayed-2"></span>
						</div>
						<div class="flexgrid-column">
							<span id="displayed-3"></span>
						</div>
					</div>
				</div>
				<br/>

				<!-- Footer -->
				<div class="ink-hr">
					<hr/>
					<span class="ink-text-link">
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.reveriewisp.com/"><i class="fas fa-home"></i></a>&nbsp;]&nbsp;
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://twitter.com/ReverieWisp"><i class="fab fa-twitter"></i></a>&nbsp;]&nbsp;
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.deviantart.com/reveriewisp"><i class="fab fa-deviantart"></i></i></a>&nbsp;]&nbsp;
					</span>
					<p class="ink-footer-text">Due to the nature of papermaking, sizing is approximate, tho tends to run a tad bigger than specified. Derg.ink comissions and distribution are handled by <a href="https://loam.net">Loam LLC</a>. Content copyright &copy; 2019 <a href="https://loam.net">Loam LLC</a> - all rights reserved.  Trademarks belong to their respective owners.</p>
				</div>

				<!-- Modal contentsfor selecting a displayable image -->
				<div id="modal" class="ink-modal">
					<span id="modal-close">&times;</span>
					<img class="modal-content" id="ink-modal-image">
					<div id="modal-caption"></div>
				</div>
			</div>
		</div>


		<!-- Provides an array of image objects -->
		<script language="JavaScript" src="images.json"></script>

		<!-- Set up the document -->
		<script type="text/javascript">
			// Variables
			let columns = 4;

			// Disable logo interactions
			document.getElementById('ink-logo').draggable = false;

			// Sift through and display all the images in the json file
			for(let i = 0; i < images.length; i++) {
				let src = images[i].src;
				let alt = images[i].alt;
				let date = images[i].date;
				let title = images[i].title;
				let elem = document.getElementById('displayed-' + (i % columns));

				elem.innerHTML = elem.innerHTML + `<div class="ink-panel"><img data-date="${date}" data-title="${title}" class="ink-displayable" src="${src}" alt="${alt}"><p class="ink-caption">${alt}</p></div>`;
			}

			// now that items are displayed, parse them to hook up popup behavior
			var displayables = document.getElementsByClassName("ink-displayable");
			var modalImg = document.getElementById("ink-modal-image");

			// Set up displayables for callbacks
			for (i = 0; i < displayables.length; i++) {
				let element = displayables[i];
			
				element.onclick = function() { 
					onElementClick(element, true);
				};
			}

			// Displays the target image in history
			function onElementClick(element, writeToHistory) {
					modal.style.display = "block";
					modalImg.src = element.src;
					modalCaption.innerHTML = element.alt;

					if(writeToHistory != null && writeToHistory == true)
					{
						let date = element.getAttribute("data-date");
						let src = element.getAttribute("src");
						let desc = element.getAttribute("alt");
						let title = element.getAttribute("data-title");
						let querystr = `?date=${date}&title=${title}`;

						document.querySelector('meta[property="og:title"').setAttribute("content", title);
						document.querySelector('meta[property="og:image"').setAttribute("content", "https://derg.ink/" + src);
						document.querySelector('meta[property="og:description"').setAttribute("content", desc);
						document.querySelector('meta[property="og:url"').setAttribute("content", "https://derg.ink/" + querystr);

						window.history.pushState("Dragon Ink Gallery", "Dragon Ink Gallery", querystr);
					}
			}

			// Set up modal interactions
			let modal = document.getElementById("modal");
			let modalCaption = document.getElementById("modal-caption");
			let closeSection = document.getElementById("modal-close");
			let closeBG = document.getElementById("modal");

			// Modal function binding
			closeBG.onclick = function() { modal.style.display = "none"; cleanQueryState(); }
			closeSection.onclick = function() { modal.style.display = "none"; cleanQueryState(); }

			// Parse query string and display the corresponding thing as necessary
			// Modified from https://stackoverflow.com/a/2091331
			function getQueryVariable(variable) {
			    let query = window.location.search.substring(1);
			    let vars = query.split('&');

			    for (let i = 0; i < vars.length; i++) {
			        let pair = vars[i].split('=');
			        if (decodeURIComponent(pair[0]) == variable) {
			            return decodeURIComponent(pair[1]);
			        }
			    }

			    return null;
			}

			// Remove the query string in the browser window
			// From http://atodorov.org/blog/2013/01/28/remove-query-string-with-javascript-and-html5/
			function cleanQueryState() {
				let uri = window.location.toString();
				if (uri.indexOf("?") > 0) {
				    let clean_uri = uri.substring(0, uri.indexOf("?"));
				    window.history.replaceState({}, document.title, clean_uri);
				}
			}

			// Parse out params and pop up the target image if it exists
			if(getQueryVariable('date') != null && getQueryVariable('title') != null)
			{
				let date = getQueryVariable('date').toLowerCase();
				let title  = getQueryVariable('title').toLowerCase();

				for(let i = 0; i < displayables.length; ++i) {
					let target = displayables[i];
					let targetDate = target.getAttribute("data-date").toLowerCase();
					let targetTitle = target.getAttribute("data-title").toLowerCase();

					if(date == targetDate && title == targetTitle) {
						onElementClick(target, false);
						break;
					}
				}
			}
		</script>
	</body>
</html>