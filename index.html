<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Traditional papercrafts and ink-based artwork, gallery and comission site! Comissions feature handmade paper, journals, pictures, and more!">
		<meta name="author" content="Reverie Wisp">

		<!-- Font awesome paintbrush used for a favicon! No changes were made. https://fontawesome.com/license -->
		<link rel="icon" href="assets/brush.ico" type="image/gif">

		<title>Dragon Ink</title>
		
		<!-- Open graph preview tools -->
		<meta property="og:site_name" content="Dragon Ink">
		<meta property="og:title" content="Dragon Ink: Handmade Paper and Art">
		<meta property="og:description" content="Handmade paper, journals, and ink-based artwork available to purchase or commission!">
		<meta property="og:image" content="https://derg.ink/assets/logo.png">
		<meta property="og:url" content="https://derg.ink/">
		<meta property="og:type" content="product">
		
		<meta name="twitter:site" content="@LoamApp">
		<meta name="twitter:card" content="Handmade paper, journals and artwork!">

		<!-- Style sheets -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=IM+Fell+English+SC|Lato" rel="stylesheet">
		<link rel="stylesheet" href="/assets/style.css">

		<!-- Scripts -->
		<link href="https://fonts.googleapis.com/css?family=Pangolin&display=swap" rel="stylesheet">
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

		<!-- Data -->
		<script language="JavaScript" src="gallery.json"></script>
		<script language="JavaScript" src="/globals.json"></script>
	</head>
	
	<body>
		<div class="ink-body">
			<div class="ink-main container">

				<!-- Header -->
				<div class="row justify-content-center">
					<div class="col-xs">
						<img id="ink-logo" class="ink-noselect" src="/assets/logo.png" alt="ink splotch logo">
					</div>
					<div class="col-xs ink-center">
						<div class="ink-center ink-text-title">
							<h1>Dragon Ink</h1>
							<h2 class="ink-text-subtitle">Doodles &amp; more!</h2>
							<span class="ink-text-link">
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://twitter.com/ReverieWisp"><i class="fab fa-twitter"></i></a>&nbsp;]&nbsp;
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.deviantart.com/reveriewisp"><i class="fab fa-deviantart"></i></i></a>&nbsp;]&nbsp;
								&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.reveriewisp.com/"><i class="fas fa-info"></i></i></a>&nbsp;]&nbsp;
							</span>
						</div>
					</div>
				</div>

				<!-- Section title -->
				<div class="ink-hr">
					<hr/>
					<h2 class="ink-text-title">Premade &amp; Custom Items</h2>
				</div>

				<!-- Collection of 3 categories -->
				<div class="row text-center">
					<div class="col-md">
						<img class="ink-item-img" src="assets/example-paper.jpg" alt="A fanned out stack of raspberry colored paper">
						<div class="text-left">
							<p>Want to buy paper by the sheet? 4x6 sheets start at <span class="ink-cost4x6">$1.00</span>, and 8x10 sheets start at <span class="ink-cost8x10">$2.00</span>! To see what's available, inquire through the contact & comission form!</p>
							<p>Looking for scrap paper? It starts at <span class="ink-costScrap">$0.40</span> a sheet! This paper is anything that doesn't meet thickness, uniformity, or sizing standards, or is more experimental in nature.</p>
						</div>
					</div>
					<div class="col-md">
						<img class="ink-item-img" src="assets/example-art.jpg" alt="A fanned out stack of raspberry colored paper">
						<div class="text-left">
							<p>Looking for something a little more artsy? Custom quick tree doodles start at <span class="ink-costDoodle">$10.00</span> for a sketch on 4x6 paper. Check out the gallery for examples, and the inventory page to see what's available.</p>
							<p>Custom pieces can be made to order, and pricing will varry based on the size and complexity!</p>
						</div>
					</div>
					<div class="col-md">
						<img class="ink-item-img" src="assets/example-journal.jpg" alt="A fanned out stack of raspberry colored paper">
						<div class="text-left">
							<p>Looking for a custom bound journal? Pricing starts at <span class="ink-costJournalBase">$15</span>, and by default journals come with 10 inner pages, front and back cover, and have a thread and glue binding. Each page in the journal (not including covers) is <span class="ink-costPageUncolored">$1.00 if uncolored</span>, or <span class="ink-costPageColored">$1.50</span> if colored, and you can have up to <span class="ink-maxJournalSize">40</span> pages! Complex color sets and cover artwork/designs may add additional cost!</p>
						</div>
					</div>
				</div>

				<!-- Buttons to other pages! -->
				<div>
					<br/>
					<h4 class="ink-text-title">After something already made?</h4>
					<br/>
				</div>
				<div>
					<a class="btn btn-outline-dark" href="/inventory/">Ready to Ship Inventory</a>
					<br/>
				</div>
				<div>
					<br/>
					<h4 class="ink-text-title">Looking for something custom?</h4>
					<br/>
				</div>
				<div>
					<a class="btn btn-outline-dark" href="/contact/">Contact &amp; Commission Form</a>
					<br/>
				</div>

				<!-- Section footnote -->
				<div>
					<br/>
					<p class="text-left ink-footer-text" style="max-width: 400px; margin-left: auto; margin-right: auto; font-size: ">Shipping is <span class="ink-costShipping">$5.00</span> for all orders. Tax is included in all pricing. Overseas or non-US orders may incur additional shipping cost depending on location. All paper is made from recycled materials, and will naturally contain some imperfections and small bits of other materials as a result!</p>
					<br/>
				</div>

				<!-- Section title -->
				<div class="ink-hr">
					<hr/>
					<h2 class="ink-text-title">Gallery</h2>
				</div>

				<!-- Gallery -->
				<div>
					<div class="flexgrid-row"> 
						<div class="flexgrid-column">
							<span id="displayed-0"></span>
						</div>
						<div class="flexgrid-column">
							<span id="displayed-1"></span>
						</div>  
						<div class="flexgrid-column">
							<span id="displayed-2"></span>
						</div>
						<div class="flexgrid-column">
							<span id="displayed-3"></span>
						</div>
					</div>
				</div>
				<br/>

				<!-- Footer -->
				<div class="ink-hr">
					<hr/>
					<span class="ink-text-link">
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://twitter.com/ReverieWisp"><i class="fab fa-twitter"></i></a>&nbsp;]&nbsp;
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.deviantart.com/reveriewisp"><i class="fab fa-deviantart"></i></i></a>&nbsp;]&nbsp;
						&nbsp;[&nbsp;<a style="text-decoration: none;" href="https://www.reveriewisp.com/"><i class="fas fa-info"></i></a>&nbsp;]&nbsp;
					</span>
					<p class="text-left ink-footer-text">Due to the nature of papermaking, sizing is approximate, tho tends to run a tad bigger than specified. Derg.ink comissions and distribution are handled by <a href="https://loam.net">Loam LLC</a>. Content copyright &copy; 2019 <a href="https://reveriewisp.com">Reverie Wisp</a> - all rights reserved.  Trademarks belong to their respective owners.</p>
				</div>

				<!-- Modal contents for selecting a displayable image -->
				<div id="modal" class="ink-modal">
					<span id="modal-close">&times;</span>
					<img class="modal-content" id="ink-modal-image">
					<div id="modal-caption"></div>
				</div>
			</div>
		</div>

		<!-- Set up the document -->
		<script type="text/javascript">
			// Variables
			let columns = 4;

			// Quick adjustments
			document.getElementById('ink-logo').draggable = false;

			// Sift through and display all the images in the json file
			for(let i = 0; i < images.length; i++) {
				let src = images[i].src;
				let alt = images[i].alt;
				let date = images[i].date;
				let title = images[i].title;
				let elem = document.getElementById('displayed-' + (i % columns));

				elem.innerHTML = elem.innerHTML + `<div class="ink-panel"><img data-date="${date}" data-title="${title}" class="ink-displayable" src="${src}" alt="${alt}"><p class="ink-caption">${alt}</p></div>`;
			}

			// now that items are displayed, parse them to hook up popup behavior
			var displayables = document.getElementsByClassName("ink-displayable");
			var modalImg = document.getElementById("ink-modal-image");

			// Set up displayables for callbacks
			for (i = 0; i < displayables.length; i++) {
				let element = displayables[i];
			
				element.onclick = function() { 
					onElementClick(element, true);
				};
			}

			// Displays the target image in history
			function onElementClick(element, writeToHistory) {
					modal.style.display = "block";
					modalImg.src = element.src;
					modalCaption.innerHTML = element.alt;

					if(writeToHistory != null && writeToHistory == true)
					{
						let date = element.getAttribute("data-date");
						let src = element.getAttribute("src");
						let desc = element.getAttribute("alt");
						let title = element.getAttribute("data-title");
						let querystr = `?date=${date}&title=${title}`;

						document.querySelector('meta[property="og:title"').setAttribute("content", title);
						document.querySelector('meta[property="og:image"').setAttribute("content", "https://derg.ink/" + src);
						document.querySelector('meta[property="og:description"').setAttribute("content", desc);
						document.querySelector('meta[property="og:url"').setAttribute("content", "https://derg.ink/" + querystr);

						window.history.pushState("Dragon Ink Gallery", "Dragon Ink Gallery", querystr);
					}
			}

			// Set up modal interactions
			let modal = document.getElementById("modal");
			let modalCaption = document.getElementById("modal-caption");
			let closeSection = document.getElementById("modal-close");
			let closeBG = document.getElementById("modal");

			// Modal function binding
			closeBG.onclick = function() { modal.style.display = "none"; cleanQueryState(); }
			closeSection.onclick = function() { modal.style.display = "none"; cleanQueryState(); }

			// Parse query string and display the corresponding thing as necessary
			// Modified from https://stackoverflow.com/a/2091331
			function getQueryVariable(variable) {
			    let query = window.location.search.substring(1);
			    let vars = query.split('&');

			    for (let i = 0; i < vars.length; i++) {
			        let pair = vars[i].split('=');
			        if (decodeURIComponent(pair[0]) == variable) {
			            return decodeURIComponent(pair[1]);
			        }
			    }

			    return null;
			}

			// Remove the query string in the browser window
			// From http://atodorov.org/blog/2013/01/28/remove-query-string-with-javascript-and-html5/
			function cleanQueryState() {
				let uri = window.location.toString();
				if (uri.indexOf("?") > 0) {
				    let clean_uri = uri.substring(0, uri.indexOf("?"));
				    window.history.replaceState({}, document.title, clean_uri);
				}
			}

			// Parse out params and pop up the target image if it exists
			if(getQueryVariable('date') != null && getQueryVariable('title') != null)
			{
				let date = getQueryVariable('date').toLowerCase();
				let title  = getQueryVariable('title').toLowerCase();

				for(let i = 0; i < displayables.length; ++i) {
					let target = displayables[i];
					let targetDate = target.getAttribute("data-date").toLowerCase();
					let targetTitle = target.getAttribute("data-title").toLowerCase();

					if(date == targetDate && title == targetTitle) {
						onElementClick(target, false);
						break;
					}
				}
			}

			// Globals updating
			function updateWithGlobals() {

				// Pricing updates
				for(let key in globals) {
					let valToUpdate = document.getElementsByClassName('ink-' + key);
					let isPrice = false;

					if(key.includes('cost')) {
						isPrice = true;
					}

					for(let i = 0; i < valToUpdate.length; ++i) {
						valToUpdate[i].innerHTML = `${isPrice ? "$" + globals[key].toFixed(2) : globals[key]}`;
					}
				}
			}

			// Loading replace
			document.onLoad = updateWithGlobals();

		</script>
	</body>
</html>